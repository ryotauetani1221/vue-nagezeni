(function(e){function t(t){for(var s,o,i=t[0],u=t[1],c=t[2],d=0,m=[];d<i.length;d++)o=i[d],a[o]&&m.push(a[o][0]),a[o]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s]);l&&l(t);while(m.length)m.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],s=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(s=!1)}s&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var s={},a={app:0},r=[];function o(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=s,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/vue-nagezeni/docs/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0156":function(e,t,n){"use strict";var s=n("530f"),a=n.n(s);a.a},"034f":function(e,t,n){"use strict";var s=n("64a9"),a=n.n(s);a.a},"0ce6":function(e,t,n){"use strict";var s=n("6c47"),a=n.n(s);a.a},3519:function(e,t,n){"use strict";var s=n("a6cf"),a=n.n(s);a.a},"530f":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("2b0e"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("center",[s("img",{attrs:{alt:"Vue logo",src:n("cf05")}})]),s("router-view")],1)},r=[],o=(n("034f"),n("2877")),i={},u=Object(o["a"])(i,a,r,!1,null,null,null),c=u.exports,l=n("8c4f"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"admin"},[n("div",[n("span",[e._v(e._s(e.computedGetLoginUserDataName)+"さんようこそ！")]),n("span",{staticStyle:{float:"right"}},[e._v("残高："+e._s(e.computedGetLoginUserDataMoney))])]),n("h1",[e._v("ユーザー一覧")]),n("table",[e._m(0),e._l(e.computedGetUserDataList,function(t,s){return n("tr",{key:t.name},[n("td",[e._v(e._s(t.name))]),n("td",[n("button",{on:{click:function(t){return e.showWallet(s)}}},[e._v("Walletを見る")])]),n("td",[n("button",{on:{click:function(n){return e.showSendWallet(t.name)}}},[e._v("送る")])])])})],2),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowSelectWallet,expression:"isShowSelectWallet"}],staticClass:"fixedWrap"},[n("div",{staticClass:"fixedBg",on:{click:e.closeWallet}}),n("div",{staticClass:"showWallet"},[n("p",[e._v(e._s(e.selectUserName)+"の残高")]),n("p",[e._v(e._s(e.selectUserWallet))]),n("button",{on:{click:e.closeWallet}},[e._v("close")])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowSendWallet,expression:"isShowSendWallet"}],staticClass:"fixedWrap"},[n("div",{staticClass:"fixedBg",on:{click:e.closeSendWallet}}),n("div",{staticClass:"showWallet"},[n("p",[e._v("あなたの残高："+e._s(e.computedGetLoginUserDataMoney))]),n("p",[e._v("送る金額↓")]),n("p",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.sendMoneyPrice,expression:"sendMoneyPrice"}],attrs:{type:"text"},domProps:{value:e.sendMoneyPrice},on:{input:function(t){t.target.composing||(e.sendMoneyPrice=t.target.value)}}}),n("button",{on:{click:e.sendWallet}},[e._v("送信")])]),n("button",{on:{click:e.closeSendWallet}},[e._v("閉じる")])])]),n("br"),n("br"),n("br"),n("button",{on:{click:e.logout}},[e._v("ログアウト")])])},m=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("th",[e._v("ユーザー名")])])}],p=(n("7f7f"),n("96cf"),n("3b8d")),f=n("8aa5"),h=n.n(f),v={name:"Admin",data:function(){return{isShowSendWallet:!1,isShowSelectWallet:!1,selectUserWallet:"",selectUserName:"",sendMoneyPrice:""}},computed:{computedGetUserDataList:function(){return this.$store.state.userList},computedGetLoginUserDataName:function(){return this.$store.state.userDataName},computedGetLoginUserDataMoney:function(){return this.$store.state.userDataMoney}},created:function(){var e=Object(p["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$store.commit("setLoginUser"),this.$store.dispatch("getUserDataList"),this.$store.dispatch("getLoginUserData");case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{showWallet:function(e){this.isShowSelectWallet=!0,this.selectUserName=this.computedGetUserDataList[e].name,this.selectUserWallet=this.computedGetUserDataList[e].money},closeWallet:function(){this.isShowSelectWallet=!1},showSendWallet:function(e){this.isShowSendWallet=!0,this.$store.commit("setSelectSendUserName",e)},closeSendWallet:function(){this.isShowSendWallet=!1},sendWallet:function(){this.isShowSendWallet=!1,this.$store.dispatch("sendWallet"),this.$store.commit("setSendMoneyPrice",this.sendMoneyPrice)},logout:function(){var e=this;h.a.auth().onAuthStateChanged(function(t){h.a.auth().signOut().then(function(){console.log(t+"はログアウトしました"),e.$router.push("/")}).catch(function(e){console.log("ログアウト時にエラーが発生しました (".concat(e,")"))})})}}},g=v,w=(n("0156"),Object(o["a"])(g,d,m,!1,null,null,null)),y=w.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("h1",[e._v("ログイン画面")]),n("form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[n("div",[n("label",[n("b",[e._v("メールアドレス")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userMail,expression:"userMail"}],attrs:{type:"text",placeholder:"Username"},domProps:{value:e.userMail},on:{input:function(t){t.target.composing||(e.userMail=t.target.value)}}})])]),n("div",[n("label",[n("b",[e._v("パスワード")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userPassword,expression:"userPassword"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:e.userPassword},on:{input:function(t){t.target.composing||(e.userPassword=t.target.value)}}})])]),e._m(0),n("router-link",{attrs:{to:"/signup"}},[e._v("新規登録はこちらから")])],1)])},b=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("input",{attrs:{type:"submit",value:"ログイン"}})])}],_={name:"Login",data:function(){return{userMail:"",userPassword:""}},methods:{login:function(){var e=this;h.a.auth().signInWithEmailAndPassword(this.userMail,this.userPassword).then(function(t){console.log(t),e.$router.push("/admin")}).catch(function(e){alert(e.message)})}}},U=_,M=(n("0ce6"),Object(o["a"])(U,S,b,!1,null,"5ff7fd19",null)),P=M.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"signup"},[n("h1",[e._v("新規登録画面")]),n("form",{on:{submit:function(t){return t.preventDefault(),e.signup(t)}}},[n("div",[n("label",[n("b",[e._v("ユーザー名")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],attrs:{type:"text",placeholder:"Username"},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value)}}})])]),n("div",[n("label",[n("b",[e._v("メールアドレス")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userMail,expression:"userMail"}],attrs:{type:"text",placeholder:"Username"},domProps:{value:e.userMail},on:{input:function(t){t.target.composing||(e.userMail=t.target.value)}}})])]),n("div",[n("label",[n("b",[e._v("パスワード")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userPassword,expression:"userPassword"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:e.userPassword},on:{input:function(t){t.target.composing||(e.userPassword=t.target.value)}}})])]),e._m(0),n("router-link",{attrs:{to:"/"}},[e._v("ログインはこちらから")])],1)])},W=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("input",{attrs:{type:"submit",value:"新規登録"}})])}],N={name:"Login",data:function(){return{userName:"",userMail:"",userPassword:""}},methods:{signup:function(){var e=this;h.a.auth().createUserWithEmailAndPassword(this.userMail,this.userPassword).then(function(t){console.log("Create account: ",t.email);var n=h.a.firestore();n.collection("users").doc(e.userMail).set({name:e.userName,money:500}),e.$router.push("/admin")}).catch(function(e){alert(e.message)})}}},D=N,L=(n("3519"),Object(o["a"])(D,x,W,!1,null,"f2246988",null)),$=L.exports;s["a"].use(l["a"]);var k=new l["a"]({mode:"history",base:"/vue-nagezeni/docs/",routes:[{path:"*",redirect:"/"},{path:"/",name:"login",component:P},{path:"/admin",name:"admin",component:y,meta:{requiresAuth:!0}},{path:"/signup",name:"signup",component:$}]}),j=(n("c5f6"),n("ac6a"),n("2f62"));s["a"].use(j["a"]);var O=new j["a"].Store({state:{user:{},userDataName:"",userDataMoney:"",userList:[],selectSendUserName:"",selectSendUserEmail:"",selectSendUserMoney:"",sendMoneyPrice:""},mutations:{setLoginUser:function(e){e.user=h.a.auth().currentUser},setLoginUserDataName:function(e,t){e.userDataName=t},setLoginUserDataMoney:function(e,t){e.userDataMoney=t},setUserDataList:function(e,t){e.userList=t},setSelectSendUserName:function(e,t){e.selectSendUserName=t},setSelectSendUserEmail:function(e,t){e.selectSendUserEmail=t},setSelectSendUserMoney:function(e,t){e.selectSendUserMoney=t},setSendMoneyPrice:function(e,t){e.sendMoneyPrice=t}},actions:{getLoginUserData:function(){var e=Object(p["a"])(regeneratorRuntime.mark(function e(){var t,n,s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.state.user.email,n=h.a.firestore(),s=n.collection("users").doc(t),e.next=5,s.get();case 5:a=e.sent,this.commit("setLoginUserDataName",a.data().name),this.commit("setLoginUserDataMoney",a.data().money);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getUserDataList:function(){var e=Object(p["a"])(regeneratorRuntime.mark(function e(){var t,n,s,a,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=h.a.firestore(),n=t.collection("users"),e.next=4,n.get();case 4:s=e.sent,a=[],s.forEach(function(e){e.id!==r.state.user.email&&a.push(e.data())}),this.commit("setUserDataList",a);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),sendWallet:function(){var e=Object(p["a"])(regeneratorRuntime.mark(function e(){var t,n,s,a,r,o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=h.a.firestore(),n=t.collection("users"),e.next=4,n.get();case 4:return s=e.sent,s.forEach(function(e){o.state.selectSendUserName===e.data().name&&(o.commit("setSelectSendUserEmail",e.id),o.commit("setSelectSendUserMoney",e.data().money))}),a={money:Number(this.state.selectSendUserMoney)+Number(this.state.sendMoneyPrice),name:this.state.selectSendUserName},e.next=9,n.doc(this.state.selectSendUserEmail).set(a);case 9:return r={money:Number(this.state.userDataMoney)-Number(this.state.sendMoneyPrice),name:this.state.userDataName},e.next=12,n.doc(this.state.user.email).set(r);case 12:console.log("finished!!"),this.commit("setLoginUser"),this.dispatch("getUserDataList"),this.dispatch("getLoginUserData"),console.log("CloudStoreSetFinished!!");case 17:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}}),E={apiKey:"AIzaSyB7vjVp-_PxmWDDqtg1R_wSy27031iUehs",authDomain:"vue-nagezeni.firebaseapp.com",databaseURL:"https://vue-nagezeni.firebaseio.com",projectId:"vue-nagezeni",storageBucket:"",messagingSenderId:"764937800237",appId:"1:764937800237:web:a0be24a8f5cdefa5"};h.a.initializeApp(E),k.beforeEach(function(e,t,n){var s=e.matched.some(function(e){return e.meta.requiresAuth});s?h.a.auth().onAuthStateChanged(function(e){e?n():n({path:"/"})}):n()});t["default"]=k;s["a"].config.productionTip=!1,new s["a"]({router:k,store:O,render:function(e){return e(c)}}).$mount("#app")},"64a9":function(e,t,n){},"6c47":function(e,t,n){},a6cf:function(e,t,n){},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.ecbacb2d.js.map